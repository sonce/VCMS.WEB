{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"ng.common\"","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/getOriginFromSrc.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/connectToChild.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/monitorIframeRemoval.js","webpack:///external \"ng.bootstrap\"","webpack:///F:/d/Project/VSoft/VCMS.WEB/dist/shared/__ivy_ngcc__/fesm2015/shared.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/child/validateWindowIsIframe.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/child/handleSynAckMessageFactory.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/validateIframeHasSrcOrSrcDoc.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/connectCallReceiver.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/handleAckMessageFactory.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/enums.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/generateId.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/errorSerialization.js","webpack:///external \"rxjs\"","webpack:///external \"rxjs.operators\"","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/startConnectionTimeout.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/child/connectToParent.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/createLogger.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/connectCallSender.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/parent/handleSynMessageFactory.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/index.js","webpack:///F:/d/Project/VSoft/VCMS.WEB/node_modules/penpal/lib/createDestructor.js","webpack:///external \"ng.core\"","webpack:///src/main.ts"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__0S4P__","__WEBPACK_EXTERNAL_MODULE__7HMT__","__WEBPACK_EXTERNAL_MODULE_Vgaj__","__WEBPACK_EXTERNAL_MODULE_aP7H__","__WEBPACK_EXTERNAL_MODULE_vOrQ__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","DEFAULT_PORT_BY_PROTOCOL","URL_REGEX","opaqueOriginSchemes","src","find","scheme","startsWith","location","document","regexResult","exec","protocol","hostname","port","portSuffix","iframe","options","methods","childOrigin","timeout","debug","log","destructor","onDestroy","destroy","originForSending","handleSynMessage","handleAckMessage","promise","Promise","resolve","reject","stopConnectionTimeout","handleMessage","event","source","contentWindow","data","penpal","Syn","Ack","callSender","window","addEventListener","Message","error","removeEventListener","Error","code","ConnectionDestroyed","CHECK_IFRAME_IN_DOC_INTERVAL","checkIframeInDocIntervalId","setInterval","isConnected","clearInterval","TabsComponent_li_1_Template","rf","ctx","_r3","TabsComponent_li_1_Template_li_click_0_listener","tab_r1","$implicit","ctx_r2","selectTab","hidden","title","_c0","_c1","SharedComponent","ɵfac","SharedComponent_Factory","ɵcmp","type","selectors","decls","vars","template","SharedComponent_Template","encapsulation","args","selector","TabsComponent","tabs","selected","tabComponent","length","push","map","tab","emit","TabsComponent_Factory","outputs","ngContentSelectors","consts","TabsComponent_Template","directives","styles","propDecorators","TabComponent","tabsComponent","addTab","TabComponent_Factory","hostVars","hostBindings","TabComponent_HostBindings","inputs","TabComponent_Template","ctorParameters","ButtonComponent","ButtonComponent_Factory","attrs","ButtonComponent_Template","ConfirmationDialogComponent","activeModal","close","dismiss","ConfirmationDialogComponent_Factory","message","btnOkText","btnCancelText","ConfirmationDialogComponent_Template","ConfirmationDialogComponent_Template_button_click_3_listener","ConfirmationDialogComponent_Template_button_click_9_listener","decline","ConfirmationDialogComponent_Template_button_click_11_listener","accept","ConfirmationDialogService","modalService","dialogSize","modalRef","open","size","centered","componentInstance","result","ConfirmationDialogService_Factory","ɵprov","token","ChildIframeEvents","onloaded","onsizechanged","onScriptInited","onTrackHoverElement","onScroll","onClick","IFrameChatService","hadInit","childEvents","onConnected","parentAPI","iframeChatService","childAPI","connection","pipe","child","assign","subscribe","IFrameChatService_Factory","providedIn","TestService","console","TestService_Factory","sharedComponents","SharedModule","ɵmod","ɵinj","SharedModule_Factory","providers","imports","ngJitMode","declarations","top","NotInIframe","originQualifies","parentOrigin","RegExp","test","origin","ackMessage","methodNames","keys","parent","postMessage","info","localName","local","remote","originForReceiving","destroyCallReceiver","destroyCallSender","srcdoc","NoIframeSrc","destroyed","handleMessageEvent","Call","callMessage","methodName","id","createPromiseHandler","resolution","returnValue","Reply","Rejected","returnValueIsError","err","DataCloneError","errorReplyMessage","apply","then","Fulfilled","receiverMethodNames","forEach","receiverMethodName","MessageType","Resolution","ErrorCode","NativeErrorName","NativeEventType","serializeError","stack","deserializeError","obj","deserializedError","timeoutId","undefined","setTimeout","ConnectionTimeout","callback","clearTimeout","areGlobalsAccessible","e","handleSynAckMessage","sendSynMessage","synMessage","parentOriginForSyn","SynAck","createMethodProxy","iframeRemoved","closed","destroyConnection","replyMessage","reduce","api","synAckMessage","callbacks"],"mappings":"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","file":"shared.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ng.common\"), require(\"ng.bootstrap\"), require(\"rxjs\"), require(\"rxjs.operators\"), require(\"ng.core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"ng.common\", \"ng.bootstrap\", \"rxjs\", \"rxjs.operators\", \"ng.core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shared\"] = factory(require(\"ng.common\"), require(\"ng.bootstrap\"), require(\"rxjs\"), require(\"rxjs.operators\"), require(\"ng.core\"));\n\telse\n\t\troot[\"shared\"] = factory(root[\"ng.common\"], root[\"ng.bootstrap\"], root[\"rxjs\"], root[\"rxjs.operators\"], root[\"ng.core\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0S4P__, __WEBPACK_EXTERNAL_MODULE__7HMT__, __WEBPACK_EXTERNAL_MODULE_Vgaj__, __WEBPACK_EXTERNAL_MODULE_aP7H__, __WEBPACK_EXTERNAL_MODULE_vOrQ__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0S4P__;","const DEFAULT_PORT_BY_PROTOCOL = {\n    'http:': '80',\n    'https:': '443'\n};\nconst URL_REGEX = /^(https?:)?\\/\\/([^/:]+)?(:(\\d+))?/;\nconst opaqueOriginSchemes = ['file:', 'data:'];\n/**\n * Converts a src value into an origin.\n */\nexport default (src) => {\n    if (src && opaqueOriginSchemes.find(scheme => src.startsWith(scheme))) {\n        // The origin of the child document is an opaque origin and its\n        // serialization is \"null\"\n        // https://html.spec.whatwg.org/multipage/origin.html#origin\n        return 'null';\n    }\n    // Note that if src is undefined, then srcdoc is being used instead of src\n    // and we can follow this same logic below to get the origin of the parent,\n    // which is the origin that we will need to use.\n    const location = document.location;\n    const regexResult = URL_REGEX.exec(src);\n    let protocol;\n    let hostname;\n    let port;\n    if (regexResult) {\n        // It's an absolute URL. Use the parsed info.\n        // regexResult[1] will be undefined if the URL starts with //\n        protocol = (regexResult[1] ? regexResult[1] : location.protocol);\n        hostname = regexResult[2];\n        port = regexResult[4];\n    }\n    else {\n        // It's a relative path. Use the current location's info.\n        protocol = location.protocol;\n        hostname = location.hostname;\n        port = location.port;\n    }\n    // If the port is the default for the protocol, we don't want to add it to the origin string\n    // or it won't match the message's event.origin.\n    const portSuffix = port && port !== DEFAULT_PORT_BY_PROTOCOL[protocol] ? `:${port}` : '';\n    return `${protocol}//${hostname}${portSuffix}`;\n};\n","import { ErrorCode, MessageType, NativeEventType } from '../enums';\nimport createDestructor from '../createDestructor';\nimport createLogger from '../createLogger';\nimport getOriginFromSrc from './getOriginFromSrc';\nimport handleAckMessageFactory from './handleAckMessageFactory';\nimport handleSynMessageFactory from './handleSynMessageFactory';\nimport monitorIframeRemoval from './monitorIframeRemoval';\nimport startConnectionTimeout from '../startConnectionTimeout';\nimport validateIframeHasSrcOrSrcDoc from './validateIframeHasSrcOrSrcDoc';\n/**\n * Attempts to establish communication with an iframe.\n */\nexport default (options) => {\n    let { iframe, methods = {}, childOrigin, timeout, debug = false } = options;\n    const log = createLogger(debug);\n    const destructor = createDestructor();\n    const { onDestroy, destroy } = destructor;\n    if (!childOrigin) {\n        validateIframeHasSrcOrSrcDoc(iframe);\n        childOrigin = getOriginFromSrc(iframe.src);\n    }\n    // If event.origin is \"null\", the remote protocol is file: or data: and we\n    // must post messages with \"*\" as targetOrigin when sending messages.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage#Using_window.postMessage_in_extensions\n    const originForSending = childOrigin === 'null' ? '*' : childOrigin;\n    const handleSynMessage = handleSynMessageFactory(log, methods, childOrigin, originForSending);\n    const handleAckMessage = handleAckMessageFactory(methods, childOrigin, originForSending, destructor, log);\n    const promise = new Promise((resolve, reject) => {\n        const stopConnectionTimeout = startConnectionTimeout(timeout, destroy);\n        const handleMessage = (event) => {\n            if (event.source !== iframe.contentWindow || !event.data) {\n                return;\n            }\n            if (event.data.penpal === MessageType.Syn) {\n                handleSynMessage(event);\n                return;\n            }\n            if (event.data.penpal === MessageType.Ack) {\n                const callSender = handleAckMessage(event);\n                if (callSender) {\n                    stopConnectionTimeout();\n                    resolve(callSender);\n                }\n                return;\n            }\n        };\n        window.addEventListener(NativeEventType.Message, handleMessage);\n        log('Parent: Awaiting handshake');\n        monitorIframeRemoval(iframe, destructor);\n        onDestroy((error) => {\n            window.removeEventListener(NativeEventType.Message, handleMessage);\n            if (!error) {\n                error = new Error('Connection destroyed');\n                error.code = ErrorCode.ConnectionDestroyed;\n            }\n            reject(error);\n        });\n    });\n    return {\n        promise,\n        destroy() {\n            // Don't allow consumer to pass an error into destroy.\n            destroy();\n        }\n    };\n};\n","const CHECK_IFRAME_IN_DOC_INTERVAL = 60000;\n/**\n * Monitors for iframe removal and destroys connection if iframe\n * is found to have been removed from DOM. This is to prevent memory\n * leaks when the iframe is removed from the document and the consumer\n * hasn't called destroy(). Without this, event listeners attached to\n * the window would stick around and since the event handlers have a\n * reference to the iframe in their closures, the iframe would stick\n * around too.\n */\nexport default (iframe, destructor) => {\n    const { destroy, onDestroy } = destructor;\n    const checkIframeInDocIntervalId = setInterval(() => {\n        if (!iframe.isConnected) {\n            clearInterval(checkIframeInDocIntervalId);\n            destroy();\n        }\n    }, CHECK_IFRAME_IN_DOC_INTERVAL);\n    onDestroy(() => {\n        clearInterval(checkIframeInDocIntervalId);\n    });\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7HMT__;","import { Component, EventEmitter, Output, Input, HostBinding, Injectable, ɵɵdefineInjectable, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgbActiveModal, NgbModal, NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { connectToChild } from 'penpal';\nimport { from } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@ng-bootstrap/ng-bootstrap';\n\nfunction TabsComponent_li_1_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"li\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function TabsComponent_li_1_Template_li_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const tab_r1 = ctx.$implicit; const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.selectTab(tab_r1); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const tab_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵclassProp(\"tab--active\", !tab_r1.hidden);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", tab_r1.title, \" \");\n} }\nconst _c0 = [\"*\"];\nconst _c1 = [\"sharedBtn\", \"\"];\nclass SharedComponent {\r\n}\nSharedComponent.ɵfac = function SharedComponent_Factory(t) { return new (t || SharedComponent)(); };\nSharedComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SharedComponent, selectors: [[\"lib-shared-component\"]], decls: 2, vars: 0, template: function SharedComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h4\");\n        ɵngcc0.ɵɵtext(1, \"Shared component\");\n        ɵngcc0.ɵɵelementEnd();\n    } }, encapsulation: 2 });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SharedComponent, [{\n        type: Component,\n        args: [{\n                selector: 'lib-shared-component',\n                template: ` <h4>Shared component</h4> `\n            }]\n    }], null, null); })();\n\nclass TabsComponent {\r\n    constructor() {\r\n        this.tabs = [];\r\n        this.selected = new EventEmitter();\r\n    }\r\n    addTab(tabComponent) {\r\n        if (!this.tabs.length) {\r\n            tabComponent.hidden = false;\r\n        }\r\n        this.tabs.push(tabComponent);\r\n    }\r\n    selectTab(tabComponent) {\r\n        this.tabs.map((tab) => (tab.hidden = true));\r\n        tabComponent.hidden = false;\r\n        this.selected.emit(tabComponent);\r\n    }\r\n}\nTabsComponent.ɵfac = function TabsComponent_Factory(t) { return new (t || TabsComponent)(); };\nTabsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TabsComponent, selectors: [[\"lib-shared-tabs\"]], outputs: { selected: \"selected\" }, ngContentSelectors: _c0, decls: 4, vars: 1, consts: [[1, \"tabs\"], [\"class\", \"tab\", 3, \"tab--active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"tab-body\"], [1, \"tab\", 3, \"click\"]], template: function TabsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, TabsComponent_li_1_Template, 2, 3, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n    } }, directives: [ɵngcc1.NgForOf], styles: [\"[_nghost-%COMP%]{display:block}.tabs[_ngcontent-%COMP%]{border-bottom:1px solid #ebeef2;display:flex;list-style:none;margin:0;padding:0}.tab[_ngcontent-%COMP%]{cursor:pointer;line-height:40px;padding:0 20px;position:relative}.tab-body[_ngcontent-%COMP%]{padding:20px}.tab--active[_ngcontent-%COMP%]:before{background:#03a9f4;bottom:0;content:\\\"\\\";height:3px;left:0;position:absolute;right:0}\"] });\r\nTabsComponent.propDecorators = {\r\n    selected: [{ type: Output }]\r\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TabsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'lib-shared-tabs',\n                template: \"<ul class=\\\"tabs\\\">\\r\\n  <li *ngFor=\\\"let tab of tabs\\\" (click)=\\\"selectTab(tab)\\\" class=\\\"tab\\\" [class.tab--active]=\\\"!tab.hidden\\\">\\r\\n    {{ tab.title }}\\r\\n  </li>\\r\\n</ul>\\r\\n<div class=\\\"tab-body\\\">\\r\\n  <ng-content></ng-content>\\r\\n</div>\\r\\n\",\n                styles: [\":host{display:block}.tabs{border-bottom:1px solid #ebeef2;display:flex;list-style:none;margin:0;padding:0}.tab{cursor:pointer;line-height:40px;padding:0 20px;position:relative}.tab-body{padding:20px}.tab--active:before{background:#03a9f4;bottom:0;content:\\\"\\\";height:3px;left:0;position:absolute;right:0}\"]\n            }]\n    }], function () { return []; }, { selected: [{\n            type: Output\n        }] }); })();\n\nclass TabComponent {\r\n    constructor(tabsComponent) {\r\n        this.hidden = true;\r\n        tabsComponent.addTab(this);\r\n    }\r\n}\nTabComponent.ɵfac = function TabComponent_Factory(t) { return new (t || TabComponent)(ɵngcc0.ɵɵdirectiveInject(TabsComponent)); };\nTabComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TabComponent, selectors: [[\"lib-shared-tab\"]], hostVars: 1, hostBindings: function TabComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵhostProperty(\"hidden\", ctx.hidden);\n    } }, inputs: { title: \"title\" }, ngContentSelectors: _c0, decls: 1, vars: 0, template: function TabComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n    } }, encapsulation: 2 });\r\nTabComponent.ctorParameters = () => [\r\n    { type: TabsComponent }\r\n];\r\nTabComponent.propDecorators = {\r\n    title: [{ type: Input }],\r\n    hidden: [{ type: HostBinding, args: ['hidden',] }]\r\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TabComponent, [{\n        type: Component,\n        args: [{\n                selector: 'lib-shared-tab',\n                template: '<ng-content></ng-content>'\n            }]\n    }], function () { return [{ type: TabsComponent }]; }, { hidden: [{\n            type: HostBinding,\n            args: ['hidden']\n        }], title: [{\n            type: Input\n        }] }); })();\n\nclass ButtonComponent {\r\n}\nButtonComponent.ɵfac = function ButtonComponent_Factory(t) { return new (t || ButtonComponent)(); };\nButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ButtonComponent, selectors: [[\"button\", \"sharedBtn\", \"\"]], attrs: _c1, ngContentSelectors: _c0, decls: 1, vars: 0, template: function ButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n    } }, styles: [\"[_nghost-%COMP%]{background:#fff;border:1px solid #d8dde6;border-radius:6px;cursor:pointer;line-height:40px;padding:0 15px}[_nghost-%COMP%]:hover{background:#f3f7fb}\"] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ButtonComponent, [{\n        type: Component,\n        args: [{\n                // tslint:disable-next-line: component-selector\n                selector: 'button[sharedBtn]',\n                template: '<ng-content></ng-content>',\n                styles: [\":host{background:#fff;border:1px solid #d8dde6;border-radius:6px;cursor:pointer;line-height:40px;padding:0 15px}:host:hover{background:#f3f7fb}\"]\n            }]\n    }], null, null); })();\n\nclass ConfirmationDialogComponent {\r\n    constructor(activeModal) {\r\n        this.activeModal = activeModal;\r\n    }\r\n    decline() {\r\n        this.activeModal.close(false);\r\n    }\r\n    accept() {\r\n        this.activeModal.close(true);\r\n    }\r\n    dismiss() {\r\n        this.activeModal.dismiss();\r\n    }\r\n}\nConfirmationDialogComponent.ɵfac = function ConfirmationDialogComponent_Factory(t) { return new (t || ConfirmationDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.NgbActiveModal)); };\nConfirmationDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ConfirmationDialogComponent, selectors: [[\"app-confirmation-dialog\"]], inputs: { title: \"title\", message: \"message\", btnOkText: \"btnOkText\", btnCancelText: \"btnCancelText\" }, decls: 13, vars: 4, consts: [[1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [\"type\", \"button\", \"ngbAutofocus\", \"\", 1, \"btn\", \"btn-primary\", 3, \"click\"]], template: function ConfirmationDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"h4\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"button\", 2);\n        ɵngcc0.ɵɵlistener(\"click\", function ConfirmationDialogComponent_Template_button_click_3_listener() { return ctx.dismiss(); });\n        ɵngcc0.ɵɵelementStart(4, \"span\", 3);\n        ɵngcc0.ɵɵtext(5, \"\\u00D7\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 4);\n        ɵngcc0.ɵɵtext(7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(9, \"button\", 6);\n        ɵngcc0.ɵɵlistener(\"click\", function ConfirmationDialogComponent_Template_button_click_9_listener() { return ctx.decline(); });\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"button\", 7);\n        ɵngcc0.ɵɵlistener(\"click\", function ConfirmationDialogComponent_Template_button_click_11_listener() { return ctx.accept(); });\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.message, \"\\n\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.btnCancelText);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.btnOkText);\n    } }, encapsulation: 2 });\r\nConfirmationDialogComponent.ctorParameters = () => [\r\n    { type: NgbActiveModal }\r\n];\r\nConfirmationDialogComponent.propDecorators = {\r\n    title: [{ type: Input }],\r\n    message: [{ type: Input }],\r\n    btnOkText: [{ type: Input }],\r\n    btnCancelText: [{ type: Input }]\r\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ConfirmationDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'app-confirmation-dialog',\n                template: \"<div class=\\\"modal-header\\\">\\r\\n\\t<h4 class=\\\"modal-title\\\">{{ title }}</h4>\\r\\n\\t<button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"dismiss()\\\">\\r\\n\\t\\t<span aria-hidden=\\\"true\\\">&times;</span>\\r\\n\\t</button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n\\t{{ message }}\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n\\t<button type=\\\"button\\\" class=\\\"btn btn-danger\\\" (click)=\\\"decline()\\\">{{ btnCancelText }}</button>\\r\\n\\t<button type=\\\"button\\\" ngbAutofocus class=\\\"btn btn-primary\\\" (click)=\\\"accept()\\\">{{ btnOkText }}</button>\\r\\n</div>\\r\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc2.NgbActiveModal }]; }, { title: [{\n            type: Input\n        }], message: [{\n            type: Input\n        }], btnOkText: [{\n            type: Input\n        }], btnCancelText: [{\n            type: Input\n        }] }); })();\n\nclass ConfirmationDialogService {\r\n    constructor(modalService) {\r\n        this.modalService = modalService;\r\n    }\r\n    confirm(title, message, btnOkText = 'OK', btnCancelText = 'Cancel', dialogSize = 'sm') {\r\n        const modalRef = this.modalService.open(ConfirmationDialogComponent, {\r\n            size: dialogSize,\r\n            centered: true\r\n        });\r\n        modalRef.componentInstance.title = title;\r\n        modalRef.componentInstance.message = message;\r\n        modalRef.componentInstance.btnOkText = btnOkText;\r\n        modalRef.componentInstance.btnCancelText = btnCancelText;\r\n        return modalRef.result;\r\n    }\r\n}\nConfirmationDialogService.ɵfac = function ConfirmationDialogService_Factory(t) { return new (t || ConfirmationDialogService)(ɵngcc0.ɵɵinject(ɵngcc2.NgbModal)); };\nConfirmationDialogService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ConfirmationDialogService, factory: ConfirmationDialogService.ɵfac });\r\nConfirmationDialogService.ctorParameters = () => [\r\n    { type: NgbModal }\r\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ConfirmationDialogService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc2.NgbModal }]; }, null); })();\n\nclass ChildIframeEvents {\r\n    constructor() {\r\n        this.onloaded = new EventEmitter();\r\n        this.onsizechanged = new EventEmitter();\r\n        this.onScriptInited = new EventEmitter();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.onTrackHoverElement = new EventEmitter();\r\n        this.onScroll = new EventEmitter();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.onClick = new EventEmitter();\r\n    }\r\n}\n\nclass IFrameChatService {\r\n    // constructor(iframe: HTMLIFrameElement, parentAPI?: IParentWindowAPI) {\r\n    // \tif (parentAPI) parentAPI.iframeChatService = this;\r\n    // \tthis.Init(iframe, parentAPI);\r\n    // }\r\n    constructor() {\r\n        /** 是否已经握手初始化 */\r\n        this.hadInit = false;\r\n        /** 子IFRAME的事件 */\r\n        this.childEvents = new ChildIframeEvents();\r\n        /**\r\n         * 链接到iframe\r\n         */\r\n        this.onConnected = new EventEmitter();\r\n        debugger;\r\n    }\r\n    /**\r\n     * 初始化Postmate，用于父子页面的交互\r\n     */\r\n    Init(iframe, parentAPI) {\r\n        if (parentAPI)\r\n            parentAPI.iframeChatService = this;\r\n        if (this.childAPI)\r\n            this.connection.destroy();\r\n        this.connection = connectToChild({\r\n            // The iframe to which a connection should be made\r\n            iframe,\r\n            // Methods the parent is exposing to the child\r\n            methods: parentAPI\r\n        });\r\n        return from(this.connection.promise)\r\n            .pipe(tap((child) => {\r\n            this.childAPI = Object.assign(Object.assign({}, child), this.childEvents);\r\n            this.hadInit = true;\r\n            this.onConnected.emit(true);\r\n        }))\r\n            .subscribe();\r\n    }\r\n    destroy() {\r\n        this.hadInit = false;\r\n        if (this.childAPI)\r\n            this.connection.destroy();\r\n    }\r\n}\nIFrameChatService.ɵfac = function IFrameChatService_Factory(t) { return new (t || IFrameChatService)(); };\r\nIFrameChatService.ɵprov = ɵɵdefineInjectable({ factory: function IFrameChatService_Factory() { return new IFrameChatService(); }, token: IFrameChatService, providedIn: \"root\" });\r\nIFrameChatService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IFrameChatService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass TestService {\r\n    constructor() {\r\n        console.log('Test service constructor');\r\n        this.Message = 'aaa';\r\n    }\r\n    HelloWorld() {\r\n        console.log(this.Message);\r\n    }\r\n}\nTestService.ɵfac = function TestService_Factory(t) { return new (t || TestService)(); };\r\nTestService.ɵprov = ɵɵdefineInjectable({ factory: function TestService_Factory() { return new TestService(); }, token: TestService, providedIn: \"any\" });\r\nTestService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TestService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'any'\n            }]\n    }], function () { return []; }, null); })();\n\nconst sharedComponents = [SharedComponent, ButtonComponent, TabComponent, TabsComponent, ConfirmationDialogComponent];\r\nclass SharedModule {\r\n}\nSharedModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: SharedModule });\nSharedModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function SharedModule_Factory(t) { return new (t || SharedModule)(); }, providers: [TestService, ConfirmationDialogService], imports: [[CommonModule, NgbModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SharedModule, { declarations: function () { return [SharedComponent, ButtonComponent, TabComponent, TabsComponent, ConfirmationDialogComponent]; }, imports: function () { return [CommonModule, NgbModule]; }, exports: function () { return [SharedComponent, ButtonComponent, TabComponent, TabsComponent, ConfirmationDialogComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SharedModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, NgbModule],\n                providers: [TestService, ConfirmationDialogService],\n                declarations: [...sharedComponents],\n                exports: [...sharedComponents]\n            }]\n    }], null, null); })();\n\n/*\r\n * Public API Surface of shared\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { ButtonComponent, ChildIframeEvents, ConfirmationDialogComponent, ConfirmationDialogService, IFrameChatService, SharedComponent, SharedModule, TabComponent, TabsComponent, TestService, TestService as ɵa };\n\n//# sourceMappingURL=shared.js.map","import { ErrorCode } from '../enums';\nexport default () => {\n    if (window === window.top) {\n        const error = new Error('connectToParent() must be called within an iframe');\n        error.code = ErrorCode.NotInIframe;\n        throw error;\n    }\n};\n","import { MessageType } from '../enums';\nimport connectCallReceiver from '../connectCallReceiver';\nimport connectCallSender from '../connectCallSender';\n/**\n * Handles a SYN-ACK handshake message.\n */\nexport default (parentOrigin, methods, destructor, log) => {\n    const { destroy, onDestroy } = destructor;\n    return (event) => {\n        let originQualifies = parentOrigin instanceof RegExp\n            ? parentOrigin.test(event.origin)\n            : parentOrigin === '*' || parentOrigin === event.origin;\n        if (!originQualifies) {\n            log(`Child: Handshake - Received SYN-ACK from origin ${event.origin} which did not match expected origin ${parentOrigin}`);\n            return;\n        }\n        log('Child: Handshake - Received SYN-ACK, responding with ACK');\n        // If event.origin is \"null\", the remote protocol is file: or data: and we\n        // must post messages with \"*\" as targetOrigin when sending messages.\n        // https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage#Using_window.postMessage_in_extensions\n        const originForSending = event.origin === 'null' ? '*' : event.origin;\n        const ackMessage = {\n            penpal: MessageType.Ack,\n            methodNames: Object.keys(methods)\n        };\n        window.parent.postMessage(ackMessage, originForSending);\n        const info = {\n            localName: 'Child',\n            local: window,\n            remote: window.parent,\n            originForSending,\n            originForReceiving: event.origin\n        };\n        const destroyCallReceiver = connectCallReceiver(info, methods, log);\n        onDestroy(destroyCallReceiver);\n        const callSender = {};\n        const destroyCallSender = connectCallSender(callSender, info, event.data.methodNames, destroy, log);\n        onDestroy(destroyCallSender);\n        return callSender;\n    };\n};\n","import { ErrorCode } from '../enums';\nexport default (iframe) => {\n    if (!iframe.src && !iframe.srcdoc) {\n        const error = new Error('Iframe must have src or srcdoc property defined.');\n        error.code = ErrorCode.NoIframeSrc;\n        throw error;\n    }\n};\n","import { serializeError } from './errorSerialization';\nimport { MessageType, NativeEventType, NativeErrorName, Resolution } from './enums';\n/**\n * Listens for \"call\" messages coming from the remote, executes the corresponding method, and\n * responds with the return value.\n */\nexport default (info, methods, log) => {\n    const { localName, local, remote, originForSending, originForReceiving } = info;\n    let destroyed = false;\n    const handleMessageEvent = (event) => {\n        if (event.source !== remote || event.data.penpal !== MessageType.Call) {\n            return;\n        }\n        if (event.origin !== originForReceiving) {\n            log(`${localName} received message from origin ${event.origin} which did not match expected origin ${originForReceiving}`);\n            return;\n        }\n        const callMessage = event.data;\n        const { methodName, args, id } = callMessage;\n        log(`${localName}: Received ${methodName}() call`);\n        const createPromiseHandler = (resolution) => {\n            return (returnValue) => {\n                log(`${localName}: Sending ${methodName}() reply`);\n                if (destroyed) {\n                    // It's possible to throw an error here, but it would need to be thrown asynchronously\n                    // and would only be catchable using window.onerror. This is because the consumer\n                    // is merely returning a value from their method and not calling any function\n                    // that they could wrap in a try-catch. Even if the consumer were to catch the error,\n                    // the value of doing so is questionable. Instead, we'll just log a message.\n                    log(`${localName}: Unable to send ${methodName}() reply due to destroyed connection`);\n                    return;\n                }\n                const message = {\n                    penpal: MessageType.Reply,\n                    id,\n                    resolution,\n                    returnValue\n                };\n                if (resolution === Resolution.Rejected &&\n                    returnValue instanceof Error) {\n                    message.returnValue = serializeError(returnValue);\n                    message.returnValueIsError = true;\n                }\n                try {\n                    remote.postMessage(message, originForSending);\n                }\n                catch (err) {\n                    // If a consumer attempts to send an object that's not cloneable (e.g., window),\n                    // we want to ensure the receiver's promise gets rejected.\n                    if (err.name === NativeErrorName.DataCloneError) {\n                        const errorReplyMessage = {\n                            penpal: MessageType.Reply,\n                            id,\n                            resolution: Resolution.Rejected,\n                            returnValue: serializeError(err),\n                            returnValueIsError: true\n                        };\n                        remote.postMessage(errorReplyMessage, originForSending);\n                    }\n                    throw err;\n                }\n            };\n        };\n        new Promise(resolve => resolve(methods[methodName].apply(methods, args))).then(createPromiseHandler(Resolution.Fulfilled), createPromiseHandler(Resolution.Rejected));\n    };\n    local.addEventListener(NativeEventType.Message, handleMessageEvent);\n    return () => {\n        destroyed = true;\n        local.removeEventListener(NativeEventType.Message, handleMessageEvent);\n    };\n};\n","import connectCallReceiver from '../connectCallReceiver';\nimport connectCallSender from '../connectCallSender';\n/**\n * Handles an ACK handshake message.\n */\nexport default (methods, childOrigin, originForSending, destructor, log) => {\n    const { destroy, onDestroy } = destructor;\n    let destroyCallReceiver;\n    let receiverMethodNames;\n    // We resolve the promise with the call sender. If the child reconnects\n    // (for example, after refreshing or navigating to another page that\n    // uses Penpal, we'll update the call sender with methods that match the\n    // latest provided by the child.\n    const callSender = {};\n    return (event) => {\n        if (event.origin !== childOrigin) {\n            log(`Parent: Handshake - Received ACK message from origin ${event.origin} which did not match expected origin ${childOrigin}`);\n            return;\n        }\n        log('Parent: Handshake - Received ACK');\n        const info = {\n            localName: 'Parent',\n            local: window,\n            remote: event.source,\n            originForSending: originForSending,\n            originForReceiving: childOrigin\n        };\n        // If the child reconnected, we need to destroy the prior call receiver\n        // before setting up a new one.\n        if (destroyCallReceiver) {\n            destroyCallReceiver();\n        }\n        destroyCallReceiver = connectCallReceiver(info, methods, log);\n        onDestroy(destroyCallReceiver);\n        // If the child reconnected, we need to remove the methods from the\n        // previous call receiver off the sender.\n        if (receiverMethodNames) {\n            receiverMethodNames.forEach(receiverMethodName => {\n                delete callSender[receiverMethodName];\n            });\n        }\n        receiverMethodNames = event.data.methodNames;\n        const destroyCallSender = connectCallSender(callSender, info, receiverMethodNames, destroy, log);\n        onDestroy(destroyCallSender);\n        return callSender;\n    };\n};\n","export var MessageType;\n(function (MessageType) {\n    MessageType[\"Call\"] = \"call\";\n    MessageType[\"Reply\"] = \"reply\";\n    MessageType[\"Syn\"] = \"syn\";\n    MessageType[\"SynAck\"] = \"synAck\";\n    MessageType[\"Ack\"] = \"ack\";\n})(MessageType || (MessageType = {}));\nexport var Resolution;\n(function (Resolution) {\n    Resolution[\"Fulfilled\"] = \"fulfilled\";\n    Resolution[\"Rejected\"] = \"rejected\";\n})(Resolution || (Resolution = {}));\nexport var ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[\"ConnectionDestroyed\"] = \"ConnectionDestroyed\";\n    ErrorCode[\"ConnectionTimeout\"] = \"ConnectionTimeout\";\n    ErrorCode[\"NotInIframe\"] = \"NotInIframe\";\n    ErrorCode[\"NoIframeSrc\"] = \"NoIframeSrc\";\n})(ErrorCode || (ErrorCode = {}));\nexport var NativeErrorName;\n(function (NativeErrorName) {\n    NativeErrorName[\"DataCloneError\"] = \"DataCloneError\";\n})(NativeErrorName || (NativeErrorName = {}));\nexport var NativeEventType;\n(function (NativeEventType) {\n    NativeEventType[\"Message\"] = \"message\";\n})(NativeEventType || (NativeEventType = {}));\n","let id = 0;\n/**\n * @return {number} A unique ID (not universally unique)\n */\nexport default () => ++id;\n","/**\n * Converts an error object into a plain object.\n */\nexport const serializeError = ({ name, message, stack }) => ({\n    name,\n    message,\n    stack\n});\n/**\n * Converts a plain object into an error object.\n */\nexport const deserializeError = (obj) => {\n    const deserializedError = new Error();\n    // @ts-ignore\n    Object.keys(obj).forEach(key => (deserializedError[key] = obj[key]));\n    return deserializedError;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE_Vgaj__;","module.exports = __WEBPACK_EXTERNAL_MODULE_aP7H__;","import { ErrorCode } from './enums';\n/**\n * Starts a timeout and calls the callback with an error\n * if the timeout completes before the stop function is called.\n */\nexport default (timeout, callback) => {\n    let timeoutId;\n    if (timeout !== undefined) {\n        timeoutId = window.setTimeout(() => {\n            const error = new Error(`Connection timed out after ${timeout}ms`);\n            error.code = ErrorCode.ConnectionTimeout;\n            callback(error);\n        }, timeout);\n    }\n    return () => {\n        clearTimeout(timeoutId);\n    };\n};\n","import createDestructor from '../createDestructor';\nimport createLogger from '../createLogger';\nimport { ErrorCode, MessageType, NativeEventType } from '../enums';\nimport validateWindowIsIframe from './validateWindowIsIframe';\nimport handleSynAckMessageFactory from './handleSynAckMessageFactory';\nimport startConnectionTimeout from '../startConnectionTimeout';\nconst areGlobalsAccessible = () => {\n    try {\n        clearTimeout();\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n};\n/**\n * Attempts to establish communication with the parent window.\n */\nexport default (options = {}) => {\n    const { parentOrigin = '*', methods = {}, timeout, debug = false } = options;\n    const log = createLogger(debug);\n    const destructor = createDestructor();\n    const { destroy, onDestroy } = destructor;\n    validateWindowIsIframe();\n    const handleSynAckMessage = handleSynAckMessageFactory(parentOrigin, methods, destructor, log);\n    const sendSynMessage = () => {\n        log('Child: Handshake - Sending SYN');\n        const synMessage = { penpal: MessageType.Syn };\n        const parentOriginForSyn = parentOrigin instanceof RegExp ? '*' : parentOrigin;\n        window.parent.postMessage(synMessage, parentOriginForSyn);\n    };\n    const promise = new Promise((resolve, reject) => {\n        const stopConnectionTimeout = startConnectionTimeout(timeout, destroy);\n        const handleMessage = (event) => {\n            // Under niche scenarios, we get into this function after\n            // the iframe has been removed from the DOM. In Edge, this\n            // results in \"Object expected\" errors being thrown when we\n            // try to access properties on window (global properties).\n            // For this reason, we try to access a global up front (clearTimeout)\n            // and if it fails we can assume the iframe has been removed\n            // and we ignore the message event.\n            if (!areGlobalsAccessible()) {\n                return;\n            }\n            if (event.source !== parent || !event.data) {\n                return;\n            }\n            if (event.data.penpal === MessageType.SynAck) {\n                const callSender = handleSynAckMessage(event);\n                if (callSender) {\n                    window.removeEventListener(NativeEventType.Message, handleMessage);\n                    stopConnectionTimeout();\n                    resolve(callSender);\n                }\n            }\n        };\n        window.addEventListener(NativeEventType.Message, handleMessage);\n        sendSynMessage();\n        onDestroy((error) => {\n            window.removeEventListener(NativeEventType.Message, handleMessage);\n            if (!error) {\n                error = new Error('Connection destroyed');\n                error.code = ErrorCode.ConnectionDestroyed;\n            }\n            reject(error);\n        });\n    });\n    return {\n        promise,\n        destroy() {\n            // Don't allow consumer to pass an error into destroy.\n            destroy();\n        }\n    };\n};\n","export default (debug) => {\n    /**\n     * Logs a message if debug is enabled.\n     */\n    return (...args) => {\n        if (debug) {\n            console.log('[Penpal]', ...args); // eslint-disable-line no-console\n        }\n    };\n};\n","import generateId from './generateId';\nimport { deserializeError } from './errorSerialization';\nimport { ErrorCode, MessageType, NativeEventType, Resolution } from './enums';\n/**\n * Augments an object with methods that match those defined by the remote. When these methods are\n * called, a \"call\" message will be sent to the remote, the remote's corresponding method will be\n * executed, and the method's return value will be returned via a message.\n * @param {Object} callSender Sender object that should be augmented with methods.\n * @param {Object} info Information about the local and remote windows.\n * @param {Array} methodNames Names of methods available to be called on the remote.\n * @param {Promise} destructionPromise A promise resolved when destroy() is called on the penpal\n * connection.\n * @returns {Object} The call sender object with methods that may be called.\n */\nexport default (callSender, info, methodNames, destroyConnection, log) => {\n    const { localName, local, remote, originForSending, originForReceiving } = info;\n    let destroyed = false;\n    log(`${localName}: Connecting call sender`);\n    const createMethodProxy = (methodName) => {\n        return (...args) => {\n            log(`${localName}: Sending ${methodName}() call`);\n            // This handles the case where the iframe has been removed from the DOM\n            // (and therefore its window closed), the consumer has not yet\n            // called destroy(), and the user calls a method exposed by\n            // the remote. We detect the iframe has been removed and force\n            // a destroy() immediately so that the consumer sees the error saying\n            // the connection has been destroyed. We wrap this check in a try catch\n            // because Edge throws an \"Object expected\" error when accessing\n            // contentWindow.closed on a contentWindow from an iframe that's been\n            // removed from the DOM.\n            let iframeRemoved;\n            try {\n                if (remote.closed) {\n                    iframeRemoved = true;\n                }\n            }\n            catch (e) {\n                iframeRemoved = true;\n            }\n            if (iframeRemoved) {\n                destroyConnection();\n            }\n            if (destroyed) {\n                const error = new Error(`Unable to send ${methodName}() call due ` + `to destroyed connection`);\n                error.code = ErrorCode.ConnectionDestroyed;\n                throw error;\n            }\n            return new Promise((resolve, reject) => {\n                const id = generateId();\n                const handleMessageEvent = (event) => {\n                    if (event.source !== remote ||\n                        event.data.penpal !== MessageType.Reply ||\n                        event.data.id !== id) {\n                        return;\n                    }\n                    if (event.origin !== originForReceiving) {\n                        log(`${localName} received message from origin ${event.origin} which did not match expected origin ${originForReceiving}`);\n                        return;\n                    }\n                    const replyMessage = event.data;\n                    log(`${localName}: Received ${methodName}() reply`);\n                    local.removeEventListener(NativeEventType.Message, handleMessageEvent);\n                    let returnValue = replyMessage.returnValue;\n                    if (replyMessage.returnValueIsError) {\n                        returnValue = deserializeError(returnValue);\n                    }\n                    (replyMessage.resolution === Resolution.Fulfilled ? resolve : reject)(returnValue);\n                };\n                local.addEventListener(NativeEventType.Message, handleMessageEvent);\n                const callMessage = {\n                    penpal: MessageType.Call,\n                    id,\n                    methodName,\n                    args\n                };\n                remote.postMessage(callMessage, originForSending);\n            });\n        };\n    };\n    methodNames.reduce((api, methodName) => {\n        api[methodName] = createMethodProxy(methodName);\n        return api;\n    }, callSender);\n    return () => {\n        destroyed = true;\n    };\n};\n","import { MessageType } from '../enums';\n/**\n * Handles a SYN handshake message.\n */\nexport default (log, methods, childOrigin, originForSending) => {\n    return (event) => {\n        if (event.origin !== childOrigin) {\n            log(`Parent: Handshake - Received SYN message from origin ${event.origin} which did not match expected origin ${childOrigin}`);\n            return;\n        }\n        log('Parent: Handshake - Received SYN, responding with SYN-ACK');\n        const synAckMessage = {\n            penpal: MessageType.SynAck,\n            methodNames: Object.keys(methods)\n        };\n        event.source.postMessage(synAckMessage, originForSending);\n    };\n};\n","export { default as connectToChild } from './parent/connectToChild';\nexport { default as connectToParent } from './child/connectToParent';\nexport { ErrorCode } from './enums';\n","export default () => {\n    const callbacks = [];\n    let destroyed = false;\n    return {\n        destroy(error) {\n            destroyed = true;\n            callbacks.forEach(callback => {\n                callback(error);\n            });\n        },\n        onDestroy(callback) {\n            destroyed ? callback() : callbacks.push(callback);\n        }\n    };\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE_vOrQ__;","\n    export * from 'shared';\n    import { SharedModule } from 'shared';\n    export default SharedModule;\n  "]}